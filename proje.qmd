---
title: "Proje - Ä°stanbul Deprem Senaryosu"
number-sections: true

format:
  html:
    code-fold: true
    code-summary: "Show the code"
---

**Proje sayfamÄ±za hoÅŸ geldiniz. Biz Pokemon'lar olarak sizlere bir analiz yaptÄ±k.. ÅÃ¶yle ki;**

# Proje Genel BakÄ±ÅŸ ve KapsamÄ± ğŸ“‘

Projede, Ä°stanbul'daki olasÄ± bir depremin neden olabileceÄŸi hasarlarÄ± ve kayÄ±plarÄ± detaylandÄ±ran bir analiz gerÃ§ekleÅŸtirilmiÅŸtir. Bu analiz, ilÃ§e ve mahalle bazÄ±nda deÄŸiÅŸen yapÄ±sal hasarlarÄ±, can kaybÄ± ve yaralanma sayÄ±larÄ±nÄ± iÃ§ermektedir.

KullanÄ±lan veri seti, binalarÄ±n hasar durumlarÄ±nÄ± (Ã§ok aÄŸÄ±r hasarlÄ±, aÄŸÄ±r hasarlÄ±, orta hasarlÄ± ve hafif hasarlÄ±), can kaybÄ± ve yaralÄ± sayÄ±larÄ±nÄ±, altyapÄ± hasarlarÄ±nÄ± (doÄŸalgaz, iÃ§me suyu ve atÄ±k su borularÄ±) ve geÃ§ici barÄ±nma ihtiyaÃ§larÄ±nÄ± kapsamaktadÄ±r. AyrÄ±ca, nÃ¼fus sayÄ±sÄ± ile toplam hasarlÄ± binalar, can kaybÄ± ve hasarlÄ± binalara gÃ¶re can kaybÄ± oranlarÄ± da incelenmiÅŸtir.

R programlama dili kullanÄ±larak yapÄ±lan bu analiz, deprem sonrasÄ± acil mÃ¼dahale ve uzun vadeli iyileÅŸtirme Ã§alÄ±ÅŸmalarÄ±nÄ±n planlanmasÄ±nda Ã¶nemli bir referans noktasÄ± oluÅŸturmakta. Bu analiz ile ilÃ§e ve mahalle bazÄ±nda Ã¶nceliklendirme yapÄ±labilir, bÃ¶ylece en riskli bÃ¶lgelere hÄ±zlÄ± mÃ¼dahale ve kaynaklarÄ±n etkin daÄŸÄ±lÄ±mÄ± saÄŸlanabilir. Bu Ã§alÄ±ÅŸma, yerel yÃ¶netimler, kurtarma ekipleri ve politika yapÄ±cÄ±lar iÃ§in deÄŸerli bilgiler sunarak, afet risk yÃ¶netiminin ve dayanÄ±klÄ±lÄ±ÄŸÄ±n artÄ±rÄ±lmasÄ±na katkÄ±da bulunmayÄ± amaÃ§lamaktadÄ±r.

# Veri ğŸ“‰

```{r message=FALSE}
#| code-fold: true
#| code-summary: "Kod GÃ¶ster"
    library(dplyr)
    library(readr)
    library(knitr)
    library(ggplot2)
    library(leaflet)
    library(readxl)
    library(gridExtra)
    deprem_analiz <- read_excel("deprem.xlsx")
    deprem_analiz <- data.frame(lapply(deprem_analiz, function(v) {
      if (is.character(v)) return(toupper(v))
      else return(v)
    }))
    
    colnames(deprem_analiz)[1:4] <- c("id", "ilce_adi", "mahalle_adi", "mahalle_kodu")
    district_sum <- deprem_analiz %>% group_by(ilce_adi) %>% summarise(
    total_cok_agir_hasarli = sum(cok_agir_hasarli_bina_sayisi),
                                                                  total_agir_hasarli = sum(agir_hasarli_bina_sayisi),
                                                                  total_orta_hasarli = sum(orta_hasarli_bina_sayisi),
                                                                  total_hafif_hasarli = sum(hafif_hasarli_bina_sayisi),
                                                                  total_can_kaybi = sum(can_kaybi_sayisi),
                                                                  total_agir_yarali = sum(agir_yarali_sayisi),
                                                                  total_hafif_yarali = sum(hafif_yarali_sayisi),
                                                                  .groups = 'drop')
    
district_sum <- data.frame(district_sum)

    district_avg <- deprem_analiz %>% group_by(ilce_adi) %>% summarise(
                                                                  avg_cok_agir_hasarli = mean(cok_agir_hasarli_bina_sayisi),
                                                                  avg_agir_hasarli = mean(agir_hasarli_bina_sayisi),
                                                                  avg_orta_hasarli = mean(orta_hasarli_bina_sayisi),
                                                                  avg_hafif_hasarli = mean(hafif_hasarli_bina_sayisi),
                                                                  avg_can_kaybi = mean(can_kaybi_sayisi),
                                                                  avg_agir_yarali = mean(agir_yarali_sayisi),
                                                                  avg_hafif_yarali = mean(hafif_yarali_sayisi),
                                                                 .groups = 'drop')
    district_avg$ilce_adi <- factor(district_avg$ilce_adi, levels = unique(district_avg$ilce_adi))
    
    kable(head(district_avg, 50))


```

## Veri KaynaÄŸÄ±

Veri iÃ§in kullanÄ±lan kaynaÄŸa aÅŸaÄŸÄ±daki linkten eriÅŸebilirsiniz;

[Ä°stanbul Deprem Senaryosu Verileri](https://data.ibb.gov.tr/dataset/deprem-senaryosu-analiz-sonuclari)

## Veri HakkÄ±nda Genel Bilgiler

-   Ä°lce_adi: Senaryoya gÃ¶re depremden etkilenecek ilÃ§enin ismini iÃ§erir.

-   mahalle_adi: Senaryoya gÃ¶re depremden etkilenecek mahallenin ismini iÃ§erir.

-   mahalle_koy_uavt: Senaryoya gÃ¶re depremden etkilenecek mahalle ve kÃ¶yÃ¼n ulusal adres veri tabanÄ±nÄ± iÃ§erir.

-   cok_agir_hasarli_bina_sayisi: Senaryoya gÃ¶re depremden etkilenecek Ã§ok aÄŸÄ±r hasarlÄ± bina sayÄ±sÄ±nÄ± iÃ§erir.

-   agir_hasarli_bina_sayisi: Senaryoya gÃ¶re depremden etkilenecek aÄŸÄ±r hasarlÄ± bina sayÄ±sÄ±nÄ± iÃ§erir.

-   orta_hasarli_bina_sayisi: Senaryoya gÃ¶re depremden etkilenecek orta hasarlÄ± bina sayÄ±sÄ±nÄ± iÃ§erir.

-   hafif_hasarli_bina_sayisi: Senaryoya gÃ¶re depremden etkilenecek hafif hasarlÄ± bina sayÄ±sÄ±nÄ± iÃ§erir.

-   can_kaybi_sayisi: Senaryoya gÃ¶re depremde oluÅŸacak can kaybÄ± sayÄ±sÄ±nÄ± iÃ§erir.

-   agir_yarali_sayisi: Senaryoya gÃ¶re depremde oluÅŸacak aÄŸÄ±r yaralÄ± sayÄ±sÄ±nÄ± iÃ§erir.

-   hastanede_tedavi_sayisi: Senaryoya gÃ¶re depremden sonra hastanede tedavi sayÄ±sÄ±nÄ± iÃ§erir.

-   hafif_yarali_sayisi: Senaryoya gÃ¶re depremde oluÅŸacak hafif yaralÄ± sayÄ±sÄ±nÄ± iÃ§erir.

-   dogalgaz_boru_hasari: Senaryoya gÃ¶re depremde hasar gÃ¶ren doÄŸalgaz boru hattÄ± sayÄ±sÄ±nÄ± iÃ§erir.

-   icme_suyu_boru_hasari: Senaryoya gÃ¶re depremde hasar gÃ¶ren iÃ§me suyu boru hattÄ± sayÄ±sÄ±nÄ± iÃ§erir.

-   atik_su_boru_hasari: Senaryoya gÃ¶re depremde hasar gÃ¶ren atÄ±k su boru hattÄ± sayÄ±sÄ±nÄ± iÃ§erir.

-   gecici_barinma: Senaryoya gÃ¶re deprem sonrasÄ±nda oluÅŸacak geÃ§ici barÄ±nma sayÄ±sÄ±nÄ± iÃ§erir.

-   nÃ¼fus_sayÄ±sÄ±: Senaryoya gÃ¶re deprem sonrasÄ±nda ilÃ§e bazlÄ± toplam hasarlÄ± bina sayÄ±sÄ±

-   toplam_hasarlÄ±_binalar: Senaryoya gÃ¶re deprem sonrasÄ±nda ilÃ§e bazlÄ± toplam hasarlÄ± bina sayÄ±sÄ±

-   toplam_can_kaybÄ±: Senaryoya gÃ¶re deprem sonrasÄ±nda ilÃ§e bazlÄ± Ã¶lÃ¼ sayÄ±sÄ±

-   can_kaybÄ±_nÃ¼fus: Senaryoya gÃ¶re deprem sonrasÄ±nda ilÃ§e bazlÄ± Ã¶lÃ¼ sayÄ±sÄ±/ilÃ§enin toplam nÃ¼fusuna oranÄ±

-   can_kaybÄ±_hasarlÄ±_bina: Senaryoya gÃ¶re deprem sonrasÄ±nda ilÃ§e bazlÄ± Ã¶lÃ¼ sayÄ±sÄ±/ilÃ§enin toplam hasarlÄ± bina sayÄ±sÄ±na oranÄ±

# Analiz ğŸ“Š

```{r setup, warning=FALSE}
#| code-fold: true
#| code-summary: "Kod GÃ¶ster"
library(readxl)
library(stringi)
library(stringr)
library(ggplot2)
library(ggthemes)

  avg_health1 <- ggplot(district_avg, aes(x = ilce_adi)) +
  geom_line(aes(y = avg_can_kaybi, group = 1, color = "Can KaybÄ±"), size = 1) +
  geom_line(aes(y = avg_agir_yarali, group = 1, color = "AÄŸÄ±r YaralÄ±"), size = 1) +
  geom_line(aes(y = avg_hafif_yarali, group = 1, color = "Hafif YaralÄ±" ), size = 1) +
  guides(color = guide_legend(title = NULL)) +
  ylab("Yaralanmalar ve Can KayÄ±plarÄ±") +
  xlab("Ä°lÃ§e AdÄ±") +
  ggtitle("Deprem Hasar Analizi: Ä°lÃ§e BazÄ±nda Ortalama DeÄŸerler") +
  theme_base() +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
        plot.title = element_text(color = "black", size = 14, face = "bold", hjust = 0.5, vjust = 1.5),
        legend.position = "bottom",
        axis.title = element_text(color = "black", size = 12, face = "italic"),
        axis.text = element_text(color = "black", size = 8),
        legend.text = element_text(color = "black", size = 10)) +
  scale_color_manual(values = c("Can KaybÄ±" = "red", "AÄŸÄ±r YaralÄ±" = "blue", "Hafif YaralÄ±" = "darkgreen"))



```

## KeÅŸifsel Veri Analizi

```{r message=FALSE}
#| code-fold: true
#| code-summary: "Kod GÃ¶ster"

avg_health1
```

âœ”ï¸YukarÄ±daki verilerde, her ilÃ§enin bir felaket anÄ±nda kaÃ§ kiÅŸinin Ã¶leceÄŸini veya yaralanacaÄŸÄ±nÄ± gÃ¶rebiliyoruz. En yÃ¼ksek deÄŸerlere sahip olan ilÃ§elere odaklanÄ±yoruz ve bu ilÃ§elerin en yÃ¼ksek deÄŸeri almasÄ±nÄ±n nedenini anlamaya Ã§alÄ±ÅŸÄ±yoruz. Acaba bu ilÃ§eler gerÃ§ekten tehlikeli mi, yoksa sadece bÃ¼yÃ¼k bir nÃ¼fusa mÄ± sahipler? AÅŸaÄŸÄ±daki grafiklerde ise bu sorunun cevabÄ±nÄ± ararken nÃ¼fusu da dikkate alacaÄŸÄ±z.

## Ä°lÃ§elere GÃ¶re Depremin Etkisi â—

```{r message=FALSE}
#| code-fold: true
#| code-summary: "Kod GÃ¶ster"
library(ggthemes)

building_avg_line <- ggplot(district_avg, aes(x = ilce_adi)) +
  geom_line(aes(y = avg_cok_agir_hasarli, group = 1, color = "Ã‡ok AÄŸÄ±r HasarlÄ±"),size = 1) +
  geom_line(aes(y = avg_agir_hasarli, group = 1, color = "AÄŸÄ±r HasarlÄ±"),size = 1) +
  geom_line(aes(y = avg_orta_hasarli, group = 1, color = "Orta HasarlÄ±"),size = 1) +
  geom_line(aes(y = avg_hafif_hasarli, group = 1, color = "Hafif HasarlÄ±"),size = 1) +
  guides(color = guide_legend(title = NULL))+
  ylab("Ortalama Bina SayÄ±sÄ±") +
  xlab("Ä°lÃ§e AdÄ±") +
  ggtitle("Deprem Hasar Analizi Ä°lÃ§e BazÄ±nda Ortalamalar") +  
  theme_base() +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),  
        legend.text = element_text(size = 8),
        legend.position = "bottom",
        plot.title = element_text(color = "black", size = 16, face = "bold", hjust = 0.5, vjust = 1.5),
        axis.title = element_text(color = "black", size = 12, face = "italic"),
        axis.text = element_text(color = "black", size = 8)) +
  scale_color_manual(values = c("Ã‡ok AÄŸÄ±r HasarlÄ±" = "darkred", "AÄŸÄ±r HasarlÄ±" = "purple", "Orta HasarlÄ±" = "darkblue", "Hafif HasarlÄ±" = "darkgreen"))

building_avg_line

```

âœ”ï¸Bu grafik, her ilÃ§enin ortalama bina sayÄ±sÄ±nÄ± ve hasar gÃ¶ren binalarÄ±n sÄ±nÄ±flandÄ±rmasÄ±nÄ± gÃ¶stermektedir. Ã–nceki grafikle benzerlik gÃ¶stermektedir, bu da **Ã¶lÃ¼mler ile hasarlÄ± bina sayÄ±sÄ± arasÄ±nda bir iliÅŸki olabileceÄŸini dÃ¼ÅŸÃ¼ndÃ¼rmektedir.**

```{r message=FALSE}
#| code-fold: true
#| code-summary: "Kod GÃ¶ster"

library(readxl)
library(dplyr)
library(ggplot2)
library(ggthemes)

nufus_excel <- read_excel("Veri-2.xlsx") %>% 
  select(ilce, nÃ¼fus_sayÄ±sÄ±, toplam_can_kaybÄ±) %>%
  mutate(can_kaybÄ±_nÃ¼fus = (toplam_can_kaybÄ± / nÃ¼fus_sayÄ±sÄ±) * 1000)  

ggplot(nufus_excel, aes(x = ilce, y = toplam_can_kaybÄ±)) +
  geom_point(aes(size = nÃ¼fus_sayÄ±sÄ±, color = cut(can_kaybÄ±_nÃ¼fus, breaks = c(0, 0.7, 2, 5), labels = c("Least Dangerous", "Medium Dangerous", "High Dangerous")))) +
  scale_color_manual(values = c("High Dangerous" = "darkred", "Medium Dangerous" = "darkblue", "Least Dangerous" = "darkgreen")) +
  theme_base() +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1, size = 8), 
        legend.position = "none",
        axis.title.x = element_text(size = 12, face = "italic"),  # x ekseni baÅŸlÄ±ÄŸÄ± boyutu
        axis.title.y = element_text(size = 12, face = "italic")) +  # y ekseni baÅŸlÄ±ÄŸÄ± boyutu
  xlab("Semt") +
  ylab("Ã–lÃ¼m SayÄ±sÄ±") +
  scale_y_continuous(limits = c(0, max(nufus_excel$toplam_can_kaybÄ±) * 1.1)) +
  scale_size_continuous(range = c(2, 6), guide = FALSE) +
  guides(size = guide_legend(override.aes = list(color = "darkred")))
```

âœ”ï¸NoktalarÄ±n alanÄ± bize ilÃ§enin nÃ¼fus bÃ¼yÃ¼klÃ¼ÄŸÃ¼nÃ¼ gÃ¶sterir ve renkler, her ilÃ§enin tehlike seviyelerini belirlenen eÅŸik deÄŸerlere dayanarak gÃ¶sterir.

âœ”ï¸Bu alanda gerÃ§ekleÅŸme ihtimali olan Ã¶lÃ¼mlerin nÃ¼fus ile iliÅŸkisi gÃ¶sterilmektedir.

âœ”ï¸EÄŸer Ã¶lÃ¼mler diÄŸerlerine gÃ¶re nispeten kÃ¼Ã§Ã¼k nÃ¼fusa sahipse bile yÃ¼ksekse, bu ilÃ§enin yÃ¼ksek tehlikeli bir bÃ¶lge olduÄŸunu sÃ¶yleyebiliriz. EÄŸer nÃ¼fus bÃ¼yÃ¼kse ve Ã¶lÃ¼mler nispeten azsa, bu bÃ¶lgenin diÄŸerlerinden daha gÃ¼venli olduÄŸunu varsayabiliriz.

## Analiz SonuÃ§larÄ±

**Yaralanma/Can KayÄ±plarÄ±na GÃ¶re Ä°lÃ§e BazÄ±nda DeÄŸerlendirme:**

ğŸ“Œ**En Riskli Ä°lÃ§e**

-   **BahÃ§elievler**: Bu ilÃ§ede toplam 1,633 can kaybÄ± ve 879 aÄŸÄ±r yaralÄ± bulunmaktadÄ±r. Bu yÃ¼ksek sayÄ±lar, BahÃ§elievler'i incelenen ilÃ§eler arasÄ±nda en riskli ilÃ§e yapmaktadÄ±r.

ğŸ“Œ**En Risksiz Ä°lÃ§e**

-   **ArnavutkÃ¶y**: Bu ilÃ§ede hiÃ§ can kaybÄ± veya aÄŸÄ±r yaralÄ± bulunmamaktadÄ±r. Bu durum, ArnavutkÃ¶y'Ã¼ incelenen ilÃ§eler arasÄ±nda en risksiz ilÃ§e olarak gÃ¶stermektedir.

Bu sonuÃ§lar, ilgili ilÃ§elerdeki acil durum hazÄ±rlÄ±klarÄ± ve mÃ¼dahale planlarÄ±nÄ± gÃ¶zden geÃ§irmek iÃ§in Ã¶nemli bilgiler sunar. BahÃ§elievler gibi yÃ¼ksek risk taÅŸÄ±yan ilÃ§elerde daha yoÄŸun Ã¶nlemlerin alÄ±nmasÄ±, can ve mal kaybÄ±nÄ± azaltabilirken, ArnavutkÃ¶y gibi risksiz ilÃ§elerde mevcut Ã¶nlemlerin yeterliliÄŸi deÄŸerlendirilebilir. â€‹

**Ortalama HasarlÄ± Bina SayÄ±sÄ±na GÃ¶re Ä°lÃ§e BazÄ±nda DeÄŸerlendirme:**

ğŸ“ŒAvcÄ±lar ve BahÃ§elievler gibi ilÃ§eler, ortalama olarak en Ã§ok hasar gÃ¶ren ilÃ§eler arasÄ±nda yer alÄ±rken, Åile ve Ã‡atalca gibi ilÃ§eler daha az hasarla karÅŸÄ±laÅŸmÄ±ÅŸtÄ±r. Bu bilgiler, ileride yapÄ±lacak mÃ¼dahale ve iyileÅŸtirme Ã§alÄ±ÅŸmalarÄ± iÃ§in Ã¶nemli bir rehber olabilir.

**Ä°lÃ§elerin NÃ¼fuslarÄ±na GÃ¶re Can KaybÄ± DeÄŸerlendirmesi:**

-   **BakÄ±rkÃ¶y**: 232,759 nÃ¼fus ile toplam 1,046 can kaybÄ±, nÃ¼fus baÅŸÄ±na 4.494 can kaybÄ± oranÄ±.

-   **Fatih**: 443,995 nÃ¼fus ile toplam 1,484 can kaybÄ±, nÃ¼fus baÅŸÄ±na 3.342 can kaybÄ± oranÄ±.

-   **Adalar**: 23,512 nÃ¼fus ile toplam 76 can kaybÄ±, nÃ¼fus baÅŸÄ±na 3.232 can kaybÄ± oranÄ±

En dÃ¼ÅŸÃ¼k can kaybÄ± oranlarÄ±na sahip ilÃ§eler:

-   **Åile**: 48,537 nÃ¼fus ile 0 can kaybÄ±.

-   **Ã‡ekmekÃ¶y**: 264,508 nÃ¼fus ile toplam 1 can kaybÄ±, nÃ¼fus baÅŸÄ±na 0.004 can kaybÄ± oranÄ±.

-   **ArnavutkÃ¶y**: 282,488 nÃ¼fus ile 0 can kaybÄ±.

BakÄ±rkÃ¶y ve Fatih gibi yoÄŸun nÃ¼fuslu ve yÃ¼ksek oranda can kaybÄ± yaÅŸanmÄ±ÅŸ ilÃ§elerde, acil durum Ã¶nlemleri ve altyapÄ± iyileÅŸtirmeleri iÃ§in Ã¶ncelik verilmesi gerekebilir.
